!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(e=e||self).Storage=r()}(this,function(){"use strict";var e=function(){function e(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(r,t,n){return t&&e(r.prototype,t),n&&e(r,n),r}}();var r=function(){function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:localStorage,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r),this.prefix=t,this.stroage=e}return e(r,[{key:"set",value:function(e,r){var t=e.split(".");if(!Array.isArray(t)||void 0===r)return!1;var n=this.get(t[0]);if(!1===n)return!1;for(var i=0;i<t.length;i++)0===i&&i===t.length-1?n=r:0===i?null===n&&(n={}):i===t.length-1?n[t[i]]=r:n&&n.hasOwnProperty(t[i])?n=n[t[i]]:n[t[i]]={};return this.stroage.setItem(this.prefix+t[0],JSON.stringify(n)),!0}},{key:"get",value:function(e){var r=e.split(".");if(!Array.isArray(r))return!1;var t=this.stroage.getItem(this.prefix+r[0]);if(null===(t=JSON.parse(t)))return null;for(var n=t,i=0;i<r.length;i++)0!==i&&(t&&t.hasOwnProperty(r[i])?i===r.length-1?n=t[r[i]]:t=t[r[i]]:n=null);return n}},{key:"remove",value:function(e){var r=e.split(".");if(!Array.isArray(r))return!1;var t=this.get(r[0]);if(t)if(r.length<2)this.stroage.removeItem(this.prefix+r[0]);else{var n=t;r.slice(1).forEach(function(e,r,t){r===t.length-1?Array.isArray(n)&&n.splice(e,1)||delete n[e]:n=n[e]||{}}),this.stroage.setItem(this.prefix+r[0],JSON.stringify(t))}return!0}},{key:"clear",value:function(){this.stroage.clear()}}]),r}();return{persistent:new r(localStorage,"qz_"),session:new r(sessionStorage,"qz_")}});
